#!/bin/bash

# Create lateralMovement folder
mkdir -p lateralMovement

# Create SMB lateral movement scripts
echo '#!/bin/bash' > lateralMovement/smb_lateral_movement.sh
echo 'TARGET=$1' >> lateralMovement/smb_lateral_movement.sh
echo 'echo "[*] Attempting SMB login on $TARGET"' >> lateralMovement/smb_lateral_movement.sh
echo 'smbclient //${TARGET}/C$ -U "user%password" -m SMB3' >> lateralMovement/smb_lateral_movement.sh
chmod +x lateralMovement/smb_lateral_movement.sh

echo 'Write-Host "[*] Attempting SMB login on $target"' > lateralMovement/smb_lateral_movement.ps1
echo 'Invoke-Command -ScriptBlock {' >> lateralMovement/smb_lateral_movement.ps1
echo 'net use \\$target\C$ /user:username password' >> lateralMovement/smb_lateral_movement.ps1
echo '} -ComputerName $target' >> lateralMovement/smb_lateral_movement.ps1

# Create SSH lateral movement script
echo '#!/bin/bash' > lateralMovement/ssh_lateral_movement.sh
echo 'TARGET=$1' >> lateralMovement/ssh_lateral_movement.sh
echo 'ssh user@$TARGET "ls /home/user"' >> lateralMovement/ssh_lateral_movement.sh
chmod +x lateralMovement/ssh_lateral_movement.sh

# Create RDP lateral movement script
echo '#!/bin/bash' > lateralMovement/rdp_lateral_movement.sh
echo 'TARGET=$1' >> lateralMovement/rdp_lateral_movement.sh
echo 'xfreerdp /u:username /p:password /v:$TARGET' >> lateralMovement/rdp_lateral_movement.sh
chmod +x lateralMovement/rdp_lateral_movement.sh
